<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Component Testing | PactumJS</title>
    <meta name="generator" content="VuePress 1.9.7">
    <script async="true" src="https://www.googletagmanager.com/gtag/js?id=G-803PP418EL"></script>
    <script>window.dataLayer = window.dataLayer || [];
function gtag(){dataLayer.push(arguments);}
gtag('js', new Date());
gtag('config', 'G-803PP418EL');</script>
    <meta name="description" content="REST API Testing Tool">
    <meta name="twitter:site" content="@pactumjs">
    <meta property="og:title" content="PactumJS">
    <meta property="og:description" content="REST API Testing Tool">
    <meta property="og:image" content="https://pactumjs.github.io/social.png">
    
    <link rel="preload" href="/assets/css/0.styles.c94f2649.css" as="style"><link rel="preload" href="/assets/js/app.312c5655.js" as="script"><link rel="preload" href="/assets/js/2.9e610406.js" as="script"><link rel="preload" href="/assets/js/133.86d56616.js" as="script"><link rel="prefetch" href="/assets/js/10.c60edc02.js"><link rel="prefetch" href="/assets/js/100.389ea0f4.js"><link rel="prefetch" href="/assets/js/101.395077e6.js"><link rel="prefetch" href="/assets/js/102.72ec6007.js"><link rel="prefetch" href="/assets/js/103.52bbb661.js"><link rel="prefetch" href="/assets/js/104.1f2cb42e.js"><link rel="prefetch" href="/assets/js/105.5f1810f8.js"><link rel="prefetch" href="/assets/js/106.41bf81d0.js"><link rel="prefetch" href="/assets/js/107.7891a451.js"><link rel="prefetch" href="/assets/js/108.7bc3ff63.js"><link rel="prefetch" href="/assets/js/109.b1ebe6b1.js"><link rel="prefetch" href="/assets/js/11.b79fb175.js"><link rel="prefetch" href="/assets/js/110.c6ed8374.js"><link rel="prefetch" href="/assets/js/111.46b1890c.js"><link rel="prefetch" href="/assets/js/112.d55589c7.js"><link rel="prefetch" href="/assets/js/113.d3bde542.js"><link rel="prefetch" href="/assets/js/114.096dfc95.js"><link rel="prefetch" href="/assets/js/115.44ad2633.js"><link rel="prefetch" href="/assets/js/116.78791e9c.js"><link rel="prefetch" href="/assets/js/117.eb5f810b.js"><link rel="prefetch" href="/assets/js/118.0558a96f.js"><link rel="prefetch" href="/assets/js/119.81a79bdd.js"><link rel="prefetch" href="/assets/js/12.b751f60d.js"><link rel="prefetch" href="/assets/js/120.c6cfbf4f.js"><link rel="prefetch" href="/assets/js/121.4ea868a9.js"><link rel="prefetch" href="/assets/js/122.0db73e29.js"><link rel="prefetch" href="/assets/js/123.68304516.js"><link rel="prefetch" href="/assets/js/124.7bf77077.js"><link rel="prefetch" href="/assets/js/125.af1e3b0e.js"><link rel="prefetch" href="/assets/js/126.351633aa.js"><link rel="prefetch" href="/assets/js/127.c6fab255.js"><link rel="prefetch" href="/assets/js/128.73696136.js"><link rel="prefetch" href="/assets/js/129.58b91840.js"><link rel="prefetch" href="/assets/js/13.ab4f00d8.js"><link rel="prefetch" href="/assets/js/130.7a2a48f7.js"><link rel="prefetch" href="/assets/js/131.5b19ac0e.js"><link rel="prefetch" href="/assets/js/132.bb5769fd.js"><link rel="prefetch" href="/assets/js/134.ea31d0e7.js"><link rel="prefetch" href="/assets/js/135.a56618d7.js"><link rel="prefetch" href="/assets/js/136.8d243a21.js"><link rel="prefetch" href="/assets/js/137.52ace4a4.js"><link rel="prefetch" href="/assets/js/138.3c4b6e67.js"><link rel="prefetch" href="/assets/js/139.d249ec3f.js"><link rel="prefetch" href="/assets/js/14.a474184b.js"><link rel="prefetch" href="/assets/js/140.6ecba65a.js"><link rel="prefetch" href="/assets/js/141.c1e15db8.js"><link rel="prefetch" href="/assets/js/142.8001cccc.js"><link rel="prefetch" href="/assets/js/143.0d114df9.js"><link rel="prefetch" href="/assets/js/144.ac51a77d.js"><link rel="prefetch" href="/assets/js/145.9739fa03.js"><link rel="prefetch" href="/assets/js/146.b47388ad.js"><link rel="prefetch" href="/assets/js/147.07be36a3.js"><link rel="prefetch" href="/assets/js/15.85532441.js"><link rel="prefetch" href="/assets/js/16.bfc22575.js"><link rel="prefetch" href="/assets/js/17.5ced2736.js"><link rel="prefetch" href="/assets/js/18.f704ddbd.js"><link rel="prefetch" href="/assets/js/19.c1508ffd.js"><link rel="prefetch" href="/assets/js/20.82d690b2.js"><link rel="prefetch" href="/assets/js/21.e94135d8.js"><link rel="prefetch" href="/assets/js/22.b06479e6.js"><link rel="prefetch" href="/assets/js/23.e8c278d4.js"><link rel="prefetch" href="/assets/js/24.20af460e.js"><link rel="prefetch" href="/assets/js/25.4c1d2261.js"><link rel="prefetch" href="/assets/js/26.b3d5b4dd.js"><link rel="prefetch" href="/assets/js/27.baf4789c.js"><link rel="prefetch" href="/assets/js/28.e8eb172f.js"><link rel="prefetch" href="/assets/js/29.253b57e5.js"><link rel="prefetch" href="/assets/js/3.2e10cd58.js"><link rel="prefetch" href="/assets/js/30.47eebe7e.js"><link rel="prefetch" href="/assets/js/31.4c6a78ca.js"><link rel="prefetch" href="/assets/js/32.085c114e.js"><link rel="prefetch" href="/assets/js/33.3071a537.js"><link rel="prefetch" href="/assets/js/34.708d562a.js"><link rel="prefetch" href="/assets/js/35.5c9e57f6.js"><link rel="prefetch" href="/assets/js/36.b035f18d.js"><link rel="prefetch" href="/assets/js/37.78101310.js"><link rel="prefetch" href="/assets/js/38.7e814589.js"><link rel="prefetch" href="/assets/js/39.4af7a3b4.js"><link rel="prefetch" href="/assets/js/4.fd519851.js"><link rel="prefetch" href="/assets/js/40.b97275e9.js"><link rel="prefetch" href="/assets/js/41.9dbdbda9.js"><link rel="prefetch" href="/assets/js/42.1dd99e4b.js"><link rel="prefetch" href="/assets/js/43.f5836ce0.js"><link rel="prefetch" href="/assets/js/44.32640753.js"><link rel="prefetch" href="/assets/js/45.08bdfbc7.js"><link rel="prefetch" href="/assets/js/46.e108d06c.js"><link rel="prefetch" href="/assets/js/47.6ff72aac.js"><link rel="prefetch" href="/assets/js/48.0eb0339f.js"><link rel="prefetch" href="/assets/js/49.48b8df7e.js"><link rel="prefetch" href="/assets/js/5.bc0f9f92.js"><link rel="prefetch" href="/assets/js/50.64da346d.js"><link rel="prefetch" href="/assets/js/51.4634ce39.js"><link rel="prefetch" href="/assets/js/52.b84cd734.js"><link rel="prefetch" href="/assets/js/53.4dfb7bec.js"><link rel="prefetch" href="/assets/js/54.9a35f919.js"><link rel="prefetch" href="/assets/js/55.e1176aa2.js"><link rel="prefetch" href="/assets/js/56.0f39785e.js"><link rel="prefetch" href="/assets/js/57.c6dc5b2e.js"><link rel="prefetch" href="/assets/js/58.dc7e17f5.js"><link rel="prefetch" href="/assets/js/59.5517a690.js"><link rel="prefetch" href="/assets/js/6.b878c155.js"><link rel="prefetch" href="/assets/js/60.9c3e70de.js"><link rel="prefetch" href="/assets/js/61.2cd79fe1.js"><link rel="prefetch" href="/assets/js/62.6b6177f9.js"><link rel="prefetch" href="/assets/js/63.c895f0b2.js"><link rel="prefetch" href="/assets/js/64.c71bf753.js"><link rel="prefetch" href="/assets/js/65.bee479cc.js"><link rel="prefetch" href="/assets/js/66.33bace16.js"><link rel="prefetch" href="/assets/js/67.029cbee8.js"><link rel="prefetch" href="/assets/js/68.f5488b4d.js"><link rel="prefetch" href="/assets/js/69.8fe032c6.js"><link rel="prefetch" href="/assets/js/7.d8a6c271.js"><link rel="prefetch" href="/assets/js/70.1c01213d.js"><link rel="prefetch" href="/assets/js/71.cfca3cbe.js"><link rel="prefetch" href="/assets/js/72.8ee1c060.js"><link rel="prefetch" href="/assets/js/73.546a83bf.js"><link rel="prefetch" href="/assets/js/74.025c7134.js"><link rel="prefetch" href="/assets/js/75.3fca1675.js"><link rel="prefetch" href="/assets/js/76.331222fa.js"><link rel="prefetch" href="/assets/js/77.108b696c.js"><link rel="prefetch" href="/assets/js/78.6e155f0c.js"><link rel="prefetch" href="/assets/js/79.020f6a6a.js"><link rel="prefetch" href="/assets/js/8.6ff827b1.js"><link rel="prefetch" href="/assets/js/80.2d650e35.js"><link rel="prefetch" href="/assets/js/81.b9860bea.js"><link rel="prefetch" href="/assets/js/82.5b035c1b.js"><link rel="prefetch" href="/assets/js/83.3dc14356.js"><link rel="prefetch" href="/assets/js/84.75271444.js"><link rel="prefetch" href="/assets/js/85.52d54945.js"><link rel="prefetch" href="/assets/js/86.f1c7c1d5.js"><link rel="prefetch" href="/assets/js/87.bc3f4133.js"><link rel="prefetch" href="/assets/js/88.8f8aa7ee.js"><link rel="prefetch" href="/assets/js/89.4ed62d61.js"><link rel="prefetch" href="/assets/js/9.cca3f267.js"><link rel="prefetch" href="/assets/js/90.4da8141a.js"><link rel="prefetch" href="/assets/js/91.2587d198.js"><link rel="prefetch" href="/assets/js/92.5ab05075.js"><link rel="prefetch" href="/assets/js/93.35488499.js"><link rel="prefetch" href="/assets/js/94.0c5b8201.js"><link rel="prefetch" href="/assets/js/95.f58740bc.js"><link rel="prefetch" href="/assets/js/96.58621536.js"><link rel="prefetch" href="/assets/js/97.fff58935.js"><link rel="prefetch" href="/assets/js/98.31e809f9.js"><link rel="prefetch" href="/assets/js/99.e520b266.js">
    <link rel="stylesheet" href="/assets/css/0.styles.c94f2649.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><img src="/logo.svg" alt="PactumJS" class="logo"> <span class="site-name can-hide">PactumJS</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/introduction/welcome.html" class="nav-link">
  🏠 Home
</a></div><div class="nav-item"><a href="/api/table-of-contents.html" class="nav-link">
  ⇌ API
</a></div><div class="nav-item"><a href="https://github.com/pactumjs/pactum/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  📦 Releases
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="📑 More" class="dropdown-title"><span class="title">📑 More</span> <span class="arrow down"></span></button> <button type="button" aria-label="📑 More" class="mobile-dropdown-title"><span class="title">📑 More</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Social
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://twitter.com/pactumjs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          NPM Packages
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.npmjs.com/package/pactum" target="_blank" rel="noopener noreferrer" class="nav-link external">
  PactumJS
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/pactumjs/pactum" target="_blank" rel="noopener noreferrer" class="nav-link external">
  🌟 GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/introduction/welcome.html" class="nav-link">
  🏠 Home
</a></div><div class="nav-item"><a href="/api/table-of-contents.html" class="nav-link">
  ⇌ API
</a></div><div class="nav-item"><a href="https://github.com/pactumjs/pactum/releases" target="_blank" rel="noopener noreferrer" class="nav-link external">
  📦 Releases
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div><div class="nav-item"><div class="dropdown-wrapper"><button type="button" aria-label="📑 More" class="dropdown-title"><span class="title">📑 More</span> <span class="arrow down"></span></button> <button type="button" aria-label="📑 More" class="mobile-dropdown-title"><span class="title">📑 More</span> <span class="arrow right"></span></button> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><h4>
          Social
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://twitter.com/pactumjs" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Twitter
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li><li class="dropdown-item"><h4>
          NPM Packages
        </h4> <ul class="dropdown-subitem-wrapper"><li class="dropdown-subitem"><a href="https://www.npmjs.com/package/pactum" target="_blank" rel="noopener noreferrer" class="nav-link external">
  PactumJS
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></li></ul></li></ul></div></div><div class="nav-item"><a href="https://github.com/pactumjs/pactum" target="_blank" rel="noopener noreferrer" class="nav-link external">
  🌟 GitHub
  <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>🚀 Getting Started</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/introduction/welcome.html" class="sidebar-link">Introduction</a></li><li><a href="/introduction/quick-start.html" class="sidebar-link">Quick Start</a></li><li><a href="/introduction/test-style.html" class="sidebar-link">Test Style</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>📚 Guides</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/guides/api-testing.html" class="sidebar-link">API Testing</a></li><li><a href="/guides/integration-testing.html" class="sidebar-link">Integration Testing</a></li><li><a href="/guides/e2e-testing.html" class="sidebar-link">End To End Testing</a></li><li><a href="/guides/mock-server.html" class="sidebar-link">Mock Server</a></li><li><a href="/guides/component-testing.html" aria-current="page" class="active sidebar-link">Component Testing</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/guides/component-testing.html#example" class="sidebar-link">Example</a></li><li class="sidebar-sub-header"><a href="/guides/component-testing.html#pattern" class="sidebar-link">Pattern</a></li><li class="sidebar-sub-header"><a href="/guides/component-testing.html#non-crud-endpoints" class="sidebar-link">Non CRUD Endpoints</a></li></ul></li><li><a href="/guides/contract-testing.html" class="sidebar-link">Contract Testing</a></li><li><a href="/guides/data-management.html" class="sidebar-link">Data Management</a></li><li><a href="/guides/matching.html" class="sidebar-link">Matching</a></li><li><a href="/guides/reporting.html" class="sidebar-link">Reporting</a></li><li><a href="/guides/fuzz-testing.html" class="sidebar-link">Fuzz Testing</a></li><li><a href="/guides/environment-variables.html" class="sidebar-link">Environment Variables</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>📺 Media</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/media/blogs.html" class="sidebar-link">Blogs</a></li><li><a href="/media/videos.html" class="sidebar-link">Videos</a></li><li><a href="/media/projects.html" class="sidebar-link">Projects</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="component-testing"><a href="#component-testing" class="header-anchor">#</a> Component Testing</h1> <p>Component testing is defined as a software testing type, in which the testing is performed on each component (or service) separately without integrating with other components (or services).</p> <p>These tests are all about testing the functionality of individual service. During this, your service will be trying to interact with external services. But instead of talking to real external services, they talk to mock servers and local databases.</p> <div class="custom-block tip"><p class="custom-block-title">TIP</p> <p><a href="https://www.docker.com" target="_blank" rel="noopener noreferrer">Docker<span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></a> is great place to test your applications in isolation.</p> <p><strong>PactumJS</strong> might be the best tool available in the market for component testing. ¯\(ツ)/¯</p></div> <h2 id="example"><a href="#example" class="header-anchor">#</a> Example</h2> <p>To better understand the concept of component testing, consider an e-commerce application that has multiple micro-services like login-service, payment-service, <strong>order-service</strong>, <strong>inventory-service</strong> and many more. All these micro-services are developed, deployed &amp; operated independently by different teams.</p> <p>Lets focus on <strong>order-service</strong> which is responsible for managing orders. Consider it is running on port <code>3000</code> locally &amp; it has an API endpoint <code>/api/orders</code> to accept orders.</p> <p>We can write two simple functional tests for order-service</p> <ul><li>Buy a product which is in-stock</li> <li>Buy a product which is out-of-stock</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should buy a product which is in stock'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">spec</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'http://localhost:3000/api/orders'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">withJson</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;iPhone&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expectStatus</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should not buy a product which is out-of-stock'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">spec</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'http://localhost:3000/api/orders'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">withJson</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Galaxy&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expectStatus</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expectJson</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token string-property property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;product is out-of-stock&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p>When a user places an order, <strong>order-service</strong> will process it. During processing of the order it will internally communicates with the <strong>inventory-service</strong> to check if the product is available or not.</p> <p>Assume <strong>inventory-service</strong> exposes an API endpoint <code>/api/inventory</code> that returns available products in the inventory.</p> <p>As per component testing, <strong>order-service</strong> should not communicate with actual <strong>inventory-service</strong> instead with a mock version of it.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> mock <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'pactum'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

mock<span class="token punctuation">.</span><span class="token function">addInteraction</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">request</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'GET'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/api/inventory'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">queryParams</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">product</span><span class="token operator">:</span> <span class="token string">'iPhone'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">response</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
    <span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;in_stock&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

mock<span class="token punctuation">.</span><span class="token function">addInteraction</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token literal-property property">request</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'GET'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/api/inventory'</span><span class="token punctuation">,</span>
    <span class="token literal-property property">queryParams</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token literal-property property">product</span><span class="token operator">:</span> <span class="token string">'Galaxy'</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token literal-property property">response</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
    <span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token string-property property">&quot;in_stock&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

mock<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><p>Now, we can update the <strong>inventory-service</strong> to divert the traffic to the mock server and run the tests.</p> <p>This looks simple &amp; easy to test. But as the functionality of the application grows, the dependency of the <strong>order-service</strong> on other services will increase. To test different scenarios, it becomes difficult to control the behavior of mock server.</p> <h2 id="pattern"><a href="#pattern" class="header-anchor">#</a> Pattern</h2> <p><strong>PactumJS</strong> makes component testing easy &amp; fun as it allows us to control the behavior of the mock server for each &amp; every test case.</p> <p>Interactions can be added to the mock server before the execution of a test case through <code>useInteraction</code> method. Once the interactions are added, you can build your request &amp; expectations on top of it. The mock interactions added through <code>useInteraction</code> method are auto removed after the test case is executed.</p> <div class="custom-block danger"><p class="custom-block-title">DANGER</p> <p>If the interaction doesn't get exercised, the component test will fail.</p></div> <p>Let's look at the example of component tests where the mock server runs along with the tests.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> spec<span class="token punctuation">,</span> mock <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'pactum'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">before</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> mock<span class="token punctuation">.</span><span class="token function">start</span><span class="token punctuation">(</span><span class="token number">4000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">after</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> mock<span class="token punctuation">.</span><span class="token function">stop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should buy a product which is in stock'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">spec</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">useInteraction</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">request</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'GET'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/api/inventory'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">queryParams</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">product</span><span class="token operator">:</span> <span class="token string">'iPhone'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">response</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
        <span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string-property property">&quot;in_stock&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/api/orders'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">withJson</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;iPhone&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expectStatus</span><span class="token punctuation">(</span><span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'should not buy a product which is out-of-stock'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">spec</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">useInteraction</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">request</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'GET'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/api/inventory'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">queryParams</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token literal-property property">product</span><span class="token operator">:</span> <span class="token string">'iPhone'</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">response</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
        <span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token punctuation">{</span>
          <span class="token string-property property">&quot;in_stock&quot;</span><span class="token operator">:</span> <span class="token boolean">false</span>
        <span class="token punctuation">}</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/api/orders'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">withJson</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token string-property property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;iPhone&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expectStatus</span><span class="token punctuation">(</span><span class="token number">400</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expectJson</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token string-property property">&quot;message&quot;</span><span class="token operator">:</span> <span class="token string">&quot;product is out-of-stock&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br><span class="line-number">55</span><br><span class="line-number">56</span><br><span class="line-number">57</span><br><span class="line-number">58</span><br><span class="line-number">59</span><br><span class="line-number">60</span><br></div></div><div class="custom-block tip"><p class="custom-block-title">TIP</p> <p>Use interaction handlers and remote mock server to make component tests look simpler.</p></div> <h2 id="non-crud-endpoints"><a href="#non-crud-endpoints" class="header-anchor">#</a> Non CRUD Endpoints</h2> <p>Not all endpoints will perform CRUD operations. Some endpoints will perform some long running operations in the background even though it sends a response immediately. It becomes difficult to test how it interacts with other services in the background.</p> <p>This library helps to validate whether interactions are exercised or not in the background. We can also validate the number of times the interaction is exercised.</p> <p>Use <code>addInteraction</code> to add a interaction to the server &amp; later use <code>getInteraction</code> to get interaction details &amp; perform validations on it.</p> <p>Lets look at an example</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'some background process'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> id <span class="token operator">=</span> mock<span class="token punctuation">.</span><span class="token function">addInteraction</span><span class="token punctuation">(</span><span class="token string">'get product'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token keyword">await</span> <span class="token function">spec</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/api/process'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expectStatus</span><span class="token punctuation">(</span><span class="token number">202</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  <span class="token keyword">await</span> <span class="token function">sleep</span><span class="token punctuation">(</span><span class="token number">3000</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// wait for the process to complete</span>
  
  <span class="token keyword">const</span> interaction <span class="token operator">=</span> mock<span class="token punctuation">.</span><span class="token function">getInteraction</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>interaction<span class="token punctuation">.</span>exercised<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token function">expect</span><span class="token punctuation">(</span>interaction<span class="token punctuation">.</span>callCount<span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">equals</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  
  mock<span class="token punctuation">.</span><span class="token function">removeInteraction</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="static-wait"><a href="#static-wait" class="header-anchor">#</a> Static Wait</h3> <p>Alternatively, use <code>wait</code> method to pause the validation for the background process to complete.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'some background process'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">spec</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">useInteraction</span><span class="token punctuation">(</span><span class="token string">'get product'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/api/process'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expectStatus</span><span class="token punctuation">(</span><span class="token number">202</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token number">1000</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// it waits for 1s after receiving the response and before performing the assertions</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="dynamic-wait"><a href="#dynamic-wait" class="header-anchor">#</a> Dynamic Wait</h3> <p><code>wait</code> method also accepts a <code>spec</code> instance with a retry mechanism to dynamically wait for something.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'some background process'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token comment">// don't use 'await' statement</span>
  <span class="token keyword">const</span> specWait <span class="token operator">=</span> <span class="token function">spec</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token string">'/api/status'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">retry</span><span class="token punctuation">(</span><span class="token punctuation">{</span> <span class="token function-variable function">strategy</span><span class="token operator">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span>res<span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> res<span class="token punctuation">.</span>json<span class="token punctuation">.</span>status <span class="token operator">===</span> <span class="token string">'completed'</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
  <span class="token keyword">await</span> <span class="token function">spec</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">useInteraction</span><span class="token punctuation">(</span><span class="token string">'get product'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/api/process'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expectStatus</span><span class="token punctuation">(</span><span class="token number">202</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span>specWait<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h3 id="background-interactions"><a href="#background-interactions" class="header-anchor">#</a> Background Interactions</h3> <p>For Non-CRUD endpoints, your service could be taking to other dependent services after replying with a response. This behavior is mostly seen in asynchronous tasks. For such test cases, add a background interaction through <code>background</code> property and invoke the <code>wait</code> method.</p> <p>By default when a background interaction is present, pactum will wait for <code>1000</code> milliseconds with a polling interval of <code>100</code> milliseconds to check the background interactions are exercised or not.</p> <blockquote><p>Imagine it as an Explicit Wait from Selenium.</p></blockquote> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">it</span><span class="token punctuation">(</span><span class="token string">'some background process'</span><span class="token punctuation">,</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">await</span> <span class="token function">spec</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">useInteraction</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      <span class="token literal-property property">background</span><span class="token operator">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span>
      <span class="token literal-property property">request</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">method</span><span class="token operator">:</span> <span class="token string">'GET'</span><span class="token punctuation">,</span>
        <span class="token literal-property property">path</span><span class="token operator">:</span> <span class="token string">'/api/products'</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token literal-property property">response</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token literal-property property">status</span><span class="token operator">:</span> <span class="token number">200</span><span class="token punctuation">,</span>
        <span class="token literal-property property">body</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">post</span><span class="token punctuation">(</span><span class="token string">'/api/process'</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">expectStatus</span><span class="token punctuation">(</span><span class="token number">202</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">wait</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div></div> <footer class="page-edit"><div class="edit-link"><a href="https://github.com/pactumjs/pactumjs.github.io/edit/main/docs/guides/component-testing.md" target="_blank" rel="noopener noreferrer">✏️ Edit this page!</a> <span><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" focusable="false" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg> <span class="sr-only">(opens new window)</span></span></div> <div class="last-updated"><span class="prefix">Last Updated:</span> <span class="time">11/27/2022, 6:00:44 AM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/guides/mock-server.html" class="prev">
        Mock Server
      </a></span> <span class="next"><a href="/guides/contract-testing.html">
        Contract Testing
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/assets/js/app.312c5655.js" defer></script><script src="/assets/js/2.9e610406.js" defer></script><script src="/assets/js/133.86d56616.js" defer></script>
  </body>
</html>
